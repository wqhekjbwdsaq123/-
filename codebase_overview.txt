=====================================
 블로그 웹 애플리케이션 완전 정리
 (기술 스택: Next.js 16 + Supabase)
=====================================


[1] 기술 스택 요약
-------------------
- Next.js 16       : React 기반의 웹 프레임워크, 화면 그리기 담당
- TypeScript       : Javascript의 강화버전, 오타나 실수를 미리 잡아줌
- TailwindCSS      : CSS를 클래스 이름으로 빠르게 적용하는 스타일 도구
- Supabase         : 구글의 Firebase 같은 서비스, 데이터베이스·로그인·파일저장을 한 번에
- react-markdown   : 글 내용을 마크다운 형식으로 예쁘게 표시하는 라이브러리
- @uiw/react-md-editor : 마크다운 글쓰기 에디터 라이브러리
- lucide-react     : 아이콘 모음 라이브러리
- sonner           : 화면 우측 하단 토스트(알림창) 라이브러리
- date-fns         : 날짜 표시 포맷 라이브러리


========================================
[2] 폴더 및 파일 구조 전체 설명
========================================

─────────────────────────────
 [app/] 폴더 - 페이지 및 라우팅
─────────────────────────────
Next.js의 핵심 폴더. 이 안의 폴더 구조가 곧 웹사이트 주소(URL) 구조가 됨.

 app/layout.tsx
  └ 모든 페이지 공통 뼈대. Header, Footer, 전체 폰트 설정이 여기에 들어감.
    어떤 페이지를 가도 이 레이아웃 안에서 표시됨.

 app/page.tsx
  └ 블로그 홈화면 (주소: /) 
    최신 글 목록, Hero 섹션, 카테고리 필터, 페이지네이션이 모두 여기서 조립됨.

 app/globals.css
  └ 전역 CSS 스타일. 폰트, 기본 색상, 스크롤바 등 전체 디자인 기반 설정.

 app/actions.ts
  └ 홈 화면에서 쓰는 서버 함수 모음 (글 목록 조회 등).

─────────────────────────────
 [app/login/] - 로그인 페이지
─────────────────────────────
 app/login/page.tsx
  └ 로그인 화면 (주소: /login)

 app/login/actions.ts
  └ 로그인/회원가입/로그아웃 서버 처리 로직

 app/login/components/AuthForm.tsx
  └ 이메일+비밀번호 입력 폼 UI 컴포넌트

─────────────────────────────
 [app/posts/[id]/] - 글 상세 페이지
─────────────────────────────
 app/posts/[id]/page.tsx
  └ 특정 글을 클릭했을 때 보이는 상세 페이지 (주소: /posts/1, /posts/2 ...)
    글 본문, 좋아요 버튼, 댓글창이 여기서 보여짐.

 app/posts/[id]/LikeButton.tsx
  └ 글 좋아요 버튼 (로그인 사용자만 누를 수 있음)

 app/posts/[id]/PostActions.tsx
  └ 글 수정/삭제 버튼 (작성자 본인에게만 보임)

 app/posts/[id]/actions.ts
  └ 좋아요 처리 서버 로직

─────────────────────────────
 [app/write/] - 글 쓰기 페이지
─────────────────────────────
 app/write/page.tsx
  └ 새 글 작성 에디터 페이지 (주소: /write)

 app/write/actions.ts
  └ 글 저장(게시) 서버 처리 로직

 app/write/upload-action.ts
  └ 이미지 파일을 Supabase Storage에 업로드하는 서버 로직

 app/write/components/Editor.tsx
  └ 마크다운 에디터 UI 컴포넌트 (이미지 붙여넣기/업로드 포함)

─────────────────────────────
 [app/edit/[id]/] - 글 수정 페이지  **[신규]**
─────────────────────────────
 app/edit/[id]/page.tsx
  └ 기존에 작성한 글을 수정하는 페이지 (주소: /edit/1, /edit/2 ...)

 app/edit/actions.ts
  └ 글 수정 내용을 저장하는 서버 로직

─────────────────────────────
 [app/actions/] - 공통 서버 함수들  **[신규]**
─────────────────────────────
 app/actions/comments.ts
  └ 댓글 작성, 수정, 삭제, 대댓글, 댓글 좋아요 처리 서버 로직

 app/actions/categories.ts
  └ 카테고리 목록 조회 서버 로직

─────────────────────────────
 [app/components/] - UI 조각 (컴포넌트들)
─────────────────────────────
페이지를 직접 만들기보다, 재사용 가능한 작은 UI 블록들을 모아놓은 폴더.

 Header.tsx
  └ 화면 상단 네비게이션 바. 로고, 메뉴, 로그인/로그아웃, 글쓰기 버튼 포함.

 Footer.tsx
  └ 화면 하단. 사이트 이름, 카피라이트 표시.

 Hero.tsx
  └ 홈 화면 최상단 큰 배너 영역. 블로그 소개 문구 등.

 PostCard.tsx
  └ 글 목록에서 보이는 카드 하나. 썸네일, 제목, 날짜, 카테고리, 좋아요/댓글 수 표시.

 CategoryFilter.tsx
  └ 카테고리 선택 버튼들. DB에서 카테고리 목록을 동적으로 불러옴.

 Pagination.tsx
  └ 글 목록 하단의 페이지 번호 버튼들 (1, 2, 3 ...)

 SignOutButton.tsx
  └ 로그아웃 버튼 (클릭 시 세션 삭제 후 홈으로 이동)

 CommentsSection.tsx      **[신규]**
  └ 글 상세 페이지 하단에 붙는 댓글 전체 영역. CommentForm + CommentItem 들을 묶음.

 CommentForm.tsx          **[신규]**
  └ 댓글/대댓글 입력창 UI

 CommentItem.tsx          **[신규]**
  └ 댓글 하나를 표시하는 박스. 작성자, 내용, 작성일, 좋아요, 답글달기 포함.

 CommentLikeButton.tsx    **[신규]**
  └ 댓글 좋아요 버튼 전용 컴포넌트

─────────────────────────────
 [supabase/] - 데이터베이스 설계
─────────────────────────────
 supabase/migrations/
  └ DB 테이블 생성 이력 (SQL 파일들이 날짜순으로 쌓여있음)
    - 20240224_create_posts.sql         : 게시글(posts) 테이블 생성
    - 20240224120000_add_posts_rls.sql  : 게시글 보안 정책 추가
    - 20260224124500_..._images_bucket  : 이미지 저장 버킷 생성
    - 20260224125100_..._likes_table    : 좋아요 테이블 생성
    - 20260224074115_..._comments_table : 댓글 테이블 생성  **[신규]**
    - 20260224075031_..._users_view     : 공개 유저 정보 뷰  **[신규]**
    - 20260224080130_..._nested_likes   : 대댓글/댓글좋아요 테이블  **[신규]**
    - 20260224081051_..._counts_view    : 게시글+댓글수/좋아요수 뷰  **[신규]**
    - 20260224163000_..._categories     : 카테고리 테이블 생성  **[신규]**

 supabase/seed.sql
  └ 테스트용 초기 데이터 (글, 카테고리, 댓글 샘플 데이터 삽입)

─────────────────────────────
 [utils/supabase/] - Supabase 연결 도구
─────────────────────────────
 utils/supabase/client.ts
  └ 브라우저(클라이언트) 측에서 Supabase에 접속하는 연결 설정

 utils/supabase/server.ts
  └ 서버(Next.js) 측에서 Supabase에 접속하는 연결 설정. 쿠키 기반 인증 처리.

─────────────────────────────
 [기타 설정 파일들]
─────────────────────────────
 package.json        : 프로젝트 이름, 사용하는 라이브러리 목록, npm 명령어 정의
 next.config.ts      : Next.js 기본 설정. 외부 이미지 도메인 허용 등.
 tsconfig.json       : TypeScript 컴파일 설정
 .env.local          : Supabase URL, API 키 등 비밀 환경변수 저장 (git에 올리면 안됨!)
 eslint.config.mjs   : 코드 스타일 검사 규칙 설정


========================================
[3] 웹 애플리케이션 동작 흐름
========================================

-------------------------------
 흐름 1: 홈화면 접속
-------------------------------
사용자 접속
  → Next.js 서버가 app/page.tsx 실행
  → Supabase DB에서 최신 글 목록, 카테고리 목록 조회
  → Header + Hero + CategoryFilter + PostCard 조각들을 조립
  → 완성된 홈 화면을 사용자에게 표시

-------------------------------
 흐름 2: 로그인
-------------------------------
이메일/비밀번호 입력 후 로그인 클릭
  → app/login/actions.ts 의 서버 함수 실행
  → Supabase Auth 서버가 인증 확인
  → 성공 시 브라우저 쿠키에 세션 정보 저장
  → 홈 화면으로 리디렉트
  (이후 모든 페이지에서 이 쿠키를 보고 로그인 여부 판단)

-------------------------------
 흐름 3: 글 작성
-------------------------------
/write 페이지에서 제목 + 내용 + 이미지 작성
  → 이미지는 Supabase Storage에 먼저 업로드
  → 발행 버튼 클릭
  → app/write/actions.ts 가 로그인 여부 확인
  → Supabase DB의 posts 테이블에 글 데이터 INSERT
  → 완료 시 해당 글 상세 페이지(/posts/[id])로 이동

-------------------------------
 흐름 4: 글 상세 보기
-------------------------------
홈에서 글 카드 클릭
  → app/posts/[id]/page.tsx 실행
  → 해당 글 본문, 좋아요 수, 댓글 목록 조회 (Supabase)
  → 마크다운 본문을 react-markdown으로 변환하여 표시
  → 댓글창(CommentsSection) 하단에 표시

-------------------------------
 흐름 5: 댓글 작성  [신규]
-------------------------------
댓글 입력창에 내용 입력 후 등록 클릭
  → app/actions/comments.ts 의 서버 함수 실행
  → 로그인 여부 확인
  → Supabase DB의 comments 테이블에 INSERT
  → 화면 자동 갱신 (댓글 목록 새로고침)

-------------------------------
 흐름 6: 글 수정  [신규]
-------------------------------
글 상세 페이지에서 수정 버튼 클릭 (작성자 본인만 보임)
  → /edit/[id] 페이지로 이동
  → 기존 글 내용을 에디터에 미리 불러옴
  → 수정 후 저장 클릭
  → app/edit/actions.ts 가 권한 확인 후 DB UPDATE
  → 글 상세 페이지로 돌아감


========================================
[4] 데이터베이스 테이블 구조 요약
========================================

 posts (게시글)
  └ id, title, content, thumbnail_url, category_id,
    author_id, created_at, updated_at

 categories (카테고리)  **[신규]**
  └ id, name, slug, created_at

 likes (게시글 좋아요)
  └ id, post_id, user_id, created_at

 comments (댓글)  **[신규]**
  └ id, post_id, author_id, content, parent_id(대댓글용), created_at

 comment_likes (댓글 좋아요)  **[신규]**
  └ id, comment_id, user_id, created_at

 [뷰(View)]
  posts_with_counts : 게시글 + 좋아요수/댓글수 합산 조회용 가상 테이블
  public_users      : 공개 가능한 유저 정보 (이름, 아바타 등)


========================================
[5] 커밋 이력 요약 (변경 이력)
========================================

 커밋 1 - 2026-02-24 10:31
 "Initial commit from Create Next App"
  → Next.js 기본 프로젝트 생성

 커밋 2 - 2026-02-24 15:49
 "블로그 완성 및 배포 준비"
  → 홈 화면, 로그인, 글쓰기, 좋아요, 글 상세 등
     블로그 핵심 기능 전체 구현 완료

 커밋 3 - 2026-02-24 17:58  **[최신 업데이트]**
 "Add new features and UI updates"
  → 댓글/대댓글/댓글좋아요 기능 추가
  → 글 수정(edit) 기능 추가
  → 카테고리 DB 테이블 및 동적 연동 완성
  → Header 로그인 상태 반영 개선
  → PostCard에 댓글수·좋아요수 표시 추가
  → 총 28개 파일 변경, 1374줄 추가
