블로그 웹 애플리케이션 구조 및 동작 원리 안내

현재 작업 중인 블로그 웹앱은 개발자들이 많이 사용하는 최신 기술 스택인 Next.js (React 프레임워크)와 Supabase (백엔드 서비스)를 사용하여 구축되었습니다.

각각의 폴더와 파일들이 어떤 역할을 하고, 전체 웹앱이 어떻게 유기적으로 동작하는지 상세하게 설명해 드리겠습니다.

---

1. 주요 폴더 역할 (디렉토리 구조)

프로젝트에 폴더가 매우 많아 보이지만, 핵심적인 부분은 크게 4가지(app, components, supabase, utils)로 나뉩니다.

[ app/ 폴더 : 페이지와 라우팅 ]
Next.js의 핵심 폴더로, 이 폴더 안의 파일 구조가 곧 웹사이트의 인터넷 주소(URL)가 됩니다.
- app/page.tsx : 블로그의 메인 홈 화면(/)입니다. 최신 글 목록을 보여주고, 카테고리를 눌러 필터링하는 기능을 담고 있습니다.
- app/layout.tsx : 모든 페이지의 배경이 되는 가장 큰 레이아웃입니다. 화면 맨 위의 네비게이션바(Header)나 맨 아래 푸터(Footer), 글꼴 설정 등이 한 번에 들어갑니다.
- app/actions/ : 브라우저(사용자)가 아닌 서버 측에서 은밀하게 실행되는 함수들이 들어있습니다. 댓글 달기, 좋아요 누르기 등 데이터베이스를 건드리는 보안이 중요한 작업들이 모여있습니다.
- app/login/ : 로그인 화면(/login)을 구성합니다.
- app/posts/[id]/ : 특정 블로그 글을 클릭했을 때 나오는 글 상세 페이지(/posts/123)입니다. 폴더 이름이 [id]인 것은 글 번호에 따라 주소가 동적으로 변한다는 뜻입니다.
- app/write/ : 관리자나 사용자가 새로운 블로그 글을 작성하고 수정하는 에디터 창(/write)입니다.

[ app/components/ 폴더 : UI 디자인 조각들 ]
페이지 하나를 통째로 만들기보다 레고 블록처럼 디자인을 작게 쪼개둔 곳입니다.
- Header.tsx & Footer.tsx : 맨 위의 메뉴바와 맨 아래의 사이트 정보칸입니다.
- PostCard.tsx : 홈 화면에서 보이는 각각의 게시글 네모박스(썸네일, 제목, 날짜)입니다.
- CategoryFilter.tsx : 상단의 분야를 선택할 수 있게 해주는 카테고리 버튼들입니다.
- CommentsSection.tsx : 글 바로 밑에 달리는 댓글창 기능입니다.

[ supabase/ 폴더 : 데이터 저장소/백엔드 설정 ]
우리가 흔히 말하는 '데이터베이스'의 뼈대를 정의한 곳입니다. (회원은 누구인지, 글 내용은 무엇인지 저장되는 곳)
- migrations/ : 데이터베이스 규칙이나 설계도(SQL 스크립트)들이 시간대별로 저장되어 있습니다. 테이블(표)을 어떻게 만들었는지 기록해둔 역사책 같은 곳입니다.
- seed.sql : 처음 만든 웹앱이 텅 비어있으면 개발이 어려우므로 '가짜 데이터(테스트용 글, 댓글)'를 채워넣기 위한 파일입니다.

[ utils/ 폴더 : 기타 도구 상자 ]
공통적으로 쓰이는 연결선 역할을 하는 도구들입니다.
- utils/supabase/ : Next.js (프론트 디자인) 와 Supabase (백엔드 창고) 사이를 연결해주는 플러그(Client, Server) 코드들이 모여있습니다.

[ 루트의 중요 파일들 ]
- package.json : 이 블로그가 제대로 실행되기 위해 필요한 필수 외부 부품(라이브러리 패키지)들과 명령어 목록이 다 적혀있는 설명서입니다.

---

2. 웹 애플리케이션 동작 원리 (이 웹앱은 어떻게 돌아가나?)

전체적으로 이 블로그는 프론트엔드(Next.js)가 그림을 그리고, 백엔드(Supabase)가 데이터를 관리하며 서로 통신하는 방식입니다.

[ 1️⃣ 사용자가 접속할 때 첫 화면 그리기 (SSR 원리) ]
1. 방문자가 인터넷 주소창에 우리 블로그 주소(예: localhost:3000)를 치고 들어옵니다.
2. Next.js 서버(웹앱 시스템)는 app/page.tsx 를 살펴봅니다.
3. 그림을 그리기 전에 서버는 utils/supabase/를 통해 데이터베이스(Supabase)에 똑똑! 노크를 하고 "지금 제일 최신 글 목록 좀 줘!"라고 요청합니다.
4. 데이터를 건네받은 서버는 PostCard, Header 등의 레고 블록 컴포넌트들을 재빠르게 조립해서 완성된 예쁜 홈페이지(HTML)를 사용자 화면에 띄웁니다.

[ 2️⃣ 새로운 글을 썼을 때의 흐름 ]
1. 관리자가 /write 페이지에서 글을 작성하고 [저장] 또는 [발행] 버튼을 누릅니다.
2. 브라우저는 서버(Server Action 등)로 사용자가 쓴 텍스트와 이미지 데이터를 조심스럽게 전송합니다.
3. 서버는 "이 사람이 진짜 글을 쓸 권한이 있는 사람인가(로그인했나)?"를 먼저 확인합니다.
4. 승인이 되면 이 글의 데이터를 Supabase 데이터베이스 깊숙한 곳의 'posts(글)' 테이블에 새로운 열로 차곡차곡 쌓아(INSERT) 저장합니다.
5. 저장이 성공하면, 자동으로 방금 작성한 글 페이지(/posts/[id])로 부드럽게 화면을 넘겨줍니다.

[ 3️⃣ 로그인 시스템 유지 (Auth) ]
1. 사용자가 이메일/비밀번호로 로그인 요청을 보내면 Supabase Auth (인증 담당 서버)가 맞다고 도장을 찍어줍니다.
2. 브라우저는 보이지 않는 쿠키(Cookie) 통에 이 인증 정보를 보관하며 사이트를 돌아다닙니다.
3. 웹페이지 접속이나 댓글 달기를 시도할 때마다 시스템은 이 쿠키통을 뒤져보고 "아, 이 사람은 로그인 중인 OOO 회원이구나"라고 인식하고 서비스를 허용해줍니다.

이처럼 '화면(components) - 조립 및 요청 전달(page.tsx/actions) - 실제 데이터 축적(Supabase)' 의 3박자가 톱니바퀴처럼 물리며 이 현대적인 블로그 시스템이 깔끔하게 돌아가고 있습니다!
